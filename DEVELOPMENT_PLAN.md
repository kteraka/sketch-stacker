# Image Share App - 改修計画

## 現在のプロジェクト概要

### アーキテクチャ
- **バックエンド**: AWS (CloudFormation)
  - API Gateway + Lambda (Node.js 22.x)
  - S3 (Glacier Instant Retrieval)
  - CloudFront (OAC設定済み)
  - Secrets Manager (Basic認証)
  - 自動images.json更新 (S3イベントトリガー)

- **フロントエンド**: 静的HTML
  - Vanilla JS
  - レスポンシブデザイン
  - モーダル表示、Copy/Openボタン
  - 日時表示機能
  - Show All機能（初期20件→全件）

### 既存機能
1. 画像アップロード (cURL/iOS/macOS ショートカット対応)
2. 画像一覧表示 (Web UI)
3. 自動インデックス更新
4. CloudFrontによる高速配信

## 改修タスク一覧

### 1. CloudFormation → Terraform 移行
**難易度**: ⭐⭐⭐⭐
**工数**: 3-5日
**概要**: 
- AWS リソース定義をTerraform HCLに変換
- 状態管理の移行
- CI/CDパイプライン対応

**詳細タスク**:
- [ ] Terraform プロジェクト構成設計
- [ ] S3、CloudFront、API Gateway リソース定義
- [ ] Lambda関数のデプロイメント設定
- [ ] IAMロール・ポリシー移行
- [ ] Secrets Manager 移行
- [ ] 既存スタックからの移行計画

### 2. GitHub Actions CI/CD 整備
**難易度**: ⭐⭐⭐
**工数**: 2-3日
**概要**:
- デプロイメントパイプライン構築
- プルリクエストでの検証
- 環境分離（staging/production）

**詳細タスク**:
- [ ] Terraform plan/apply ワークフロー
- [ ] Lambda関数のテスト・デプロイ
- [ ] フロントエンドのビルド・デプロイ
- [ ] AWS認証情報管理 (OIDC)
- [ ] 環境変数管理

### 3. フロントエンド UI/UX 改善
**難易度**: ⭐⭐⭐
**工数**: 2-4日
**概要**:
- React/Next.js への移行
- モダンなUIライブラリ導入
- レスポンシブデザイン強化

**詳細タスク**:
- [ ] React プロジェクトセットアップ
- [ ] UIライブラリ選定 (Tailwind CSS, Material-UI等)
- [ ] コンポーネント設計
- [ ] 画像ギャラリー再実装
- [ ] モーダル・インタラクション改善
- [ ] ビルド・デプロイ設定

### 4. アップロード履歴の可視化 (GitHub草風)
**難易度**: ⭐⭐
**工数**: 1-2日
**概要**:
- カレンダー形式での活動表示
- アップロード日の視覚化
- インタラクティブな統計表示

**詳細タスク**:
- [ ] 日付データの集計ロジック
- [ ] カレンダーUIコンポーネント作成
- [ ] ヒートマップスタイリング
- [ ] ツールチップでの詳細表示
- [ ] 年/月単位での表示切り替え

## 実装優先度

### 🥇 最優先 (すぐ取り組み可能)
**4. アップロード履歴の可視化 (GitHub草風)**
- 理由: 既存データ活用、フロントエンドのみの変更
- 影響範囲が限定的
- 視覚的効果が高い

### 🥈 次優先
**3. フロントエンド UI/UX 改善**
- 理由: バックエンド変更不要、段階的移行可能
- ユーザー体験の向上が見込める

### 🥉 中長期
**2. GitHub Actions CI/CD 整備**
- 理由: 開発効率向上、他タスクの基盤となる
- Terraform移行と並行実施可能

**1. CloudFormation → Terraform 移行**
- 理由: 大規模変更、既存環境への影響大
- CI/CD整備後に実施が望ましい

## 推奨開始タスク

**「フロントエンドのReact移行」から開始することを推奨** (方針変更)

理由:
1. ローカル開発環境の確立 (S3デプロイ不要)
2. ホットリロード による効率的な開発
3. 後続のGitHub草機能実装が容易
4. 移行難易度が低い (⭐⭐)
5. 将来の機能追加基盤となる

## React開発環境の選択肢

### Next.js vs Vite の比較
詳細は後述の技術解説セクション参照

---

## 技術解説: React開発環境

### React とは
- Meta(Facebook)が開発したJavaScriptライブラリ
- UIをコンポーネント単位で構築
- **仮想DOM**: 効率的な画面更新
- **宣言的**: 「何を表示するか」に集中できる

### Next.js vs Vite

#### Next.js (フルスタックフレームワーク)
**立ち位置**: Reactベースの本格的なWebアプリケーションフレームワーク

**特徴**:
- 🏢 **プロダクション志向**: 本格的なWebサイト・アプリ向け
- 🔄 **SSR/SSG**: サーバーサイドレンダリング・静的サイト生成
- 📁 **ファイルベースルーティング**: pages/フォルダ構造で自動ルーティング
- 🚀 **豊富な最適化**: 画像最適化、コード分割、SEO対応
- 📦 **オールインワン**: 必要な機能がほぼ全て含まれる

**向いているケース**:
- 本格的なWebサイト・アプリ
- SEOが重要
- 複数ページのサイト
- チーム開発

#### Vite (ビルドツール)
**立ち位置**: 高速な開発環境を提供するビルドツール

**特徴**:
- ⚡ **超高速**: 開発サーバーの起動・更新が爆速
- 🎯 **シンプル**: 最小構成、必要な分だけ追加
- 🔧 **柔軟性**: 他ライブラリとの組み合わせ自由
- 📦 **軽量**: 設定ファイルが簡潔
- 🔥 **HMR**: Hot Module Replacement (変更即時反映)

**向いているケース**:
- シングルページアプリ (SPA)
- プロトタイピング・実験
- シンプルなプロジェクト
- 個人開発

### 本プロジェクトでの推奨: **Vite**

**理由**:
1. **現在の要件にマッチ**: 画像ギャラリーのSPA
2. **学習コスト低**: 設定が簡単
3. **開発体験**: 変更が即座に反映される快適さ
4. **軽量**: 不要な機能がない

### 開発フローの変化

#### 現在 (静的HTML)
```
コード変更 → S3アップロード → CloudFront確認 (数分)
```

#### React移行後
```
コード変更 → 即座にブラウザ更新 (1秒以下)
```

### 追加で知っておくべき技術

#### npm/yarn (パッケージマネージャー)
- **npm**: Node.jsに標準で付属
- **yarn**: Meta製、npmの改良版
- 役割: ライブラリの管理・インストール

#### TypeScript (推奨)
- JavaScriptに型定義を追加
- バグの早期発見
- 開発時の補完機能向上

#### CSS-in-JS / Tailwind CSS
- **CSS-in-JS**: JSX内にCSSを記述
- **Tailwind**: ユーティリティファーストのCSSフレームワーク
- 現在のCSSはそのまま使用可能

---

このドキュメントは開発進捗に応じて随時更新予定。